<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Look Mom! I have a mongo database!!!</h1>
    <form action='/addProduct' method='post'>
        <input type='text' placeholder="Name" name='name'>
        <input type='text' placeholder="Price" name='price'>
        <input type='text' placeholder="Quantity" name='quantity'>
        <button type="submit">Add Product</button>
    </form>
    <div id="products">

    </div>

<script>
//fetching on my own data's api! woah!
fetch('/products')
.then(response=>response.json())
.then(data=>{
console.log(data);
const container =document.getElementById('products');

data.forEach(singleData=>{
const p=document.createElement('p');
p.innerHTML=`${singleData.name} is ${singleData.price}
<button onclick=deleteProduct('${singleData._id}')>Delete</button>`;
// debugger;
container.appendChild(p);
})

})

function deleteProduct(id){
    fetch(`/delete/${id}`,{
        method:'DELETE'
    })
    .then(result=>result.json())
    .then(result=>{
        console.log('deleted successfully');
    })
}
</script>
</body>
</html>